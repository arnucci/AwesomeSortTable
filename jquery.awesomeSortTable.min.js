/**
 * jquery.awesomeSortTable.js
 * jQuery plugin, sort html table in an awesome way
 *
 * @author Arnaud Salvucci
 * @copyright MIT License
 * @version 0.0.1
 */
(function(e){e.awesomeSortTable=function(s,u){var a={all:"Select all",cancel:"Cancel",ok:"OK",sortAZ:"Sort A-Z",sortZA:"Sort Z-A"};var f=this;f.settings={};var l=e(s),s=s;f.init=function(){f.settings=e.extend({},a,u);l.append('<span><img src="fleche.png" /></span>');var s=l.children("span");s.click(function(){var s=e(this).parent("td");if(e("#menu").length!=0){n()}else{var u=c(s);s.addClass("selected");t(s,u);e("#sortAZ").click(function(){var e=r(s);o(e,s);n()});e("#sortZA").click(function(){var e=i(s);o(e,s);n()});e("#cancel").click(function(){n()})}})};var c=function(e){var t='<div id="menu">';t+='<p id="sortAZ">'+a.sortAZ+"</p>";t+='<p id="sortZA">'+a.sortZA+"</p>";t+='<form action="#" method="post" id="myForm" style="width:'+e.width()+'px;">';t+='<input type="checkbox" value="all" name="all" id="all" /> <label for="all">'+a.all+"</label><br />";for(value in h(e)){t+='<input type="checkbox" value="'+h(e)[value]+'" name="'+h(e)[value]+'" id="'+h(e)[value]+'" /><label for="'+h(e)[value]+'">'+h(e)[value]+"</label><br />"}t+='<input type="button" id="ok" name="ok" value="'+a.ok+'" />';t+='<input type="button" id="cancel" name="cancel" value="'+a.cancel+'" />';t+="</form>";t+="</div>";return t};var h=function(t){var n=t.index()+1;var r=t.parents("table").find("td:nth-child("+n+"):gt(0)");var i=[];r.each(function(){var t=e(this).html();if(e.inArray(t,i)==-1){i.push(t)}});return i};f.init()};var t=function(t,n){t.append(n);e("#all").attr("checked","true")};var n=function(){e("#menu").remove()};var r=function(e){return s(e).sort()};var i=function(e){var t=s(e).sort();return t.reverse()};var s=function(t){var n=t.index()+1;var r=t.parents("table").find("td:nth-child("+n+"):gt(0)");var i=[];r.each(function(){var t=e(this).html();i.push(t)});return i};var o=function(t,n){var r=n.index()+1;for(var i=0;i<t.length;i++){e(".selected").closest("table").find("tr:gt(0) td:nth-child("+r+")").each(function(){if(t[i]==e(this).html()){e(".selected").closest("table").append(e(this).parent())}})}};e.fn.awesomeSortTable=function(t){return this.each(function(){if(undefined==e(this).data("awesomeSortTable")){var n=new e.awesomeSortTable(this,t);e(this).data("awesomeSortTable",n)}})}})(jQuery)