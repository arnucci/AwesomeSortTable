/**
 * jquery.awesomeSortTable.js
 * jQuery plugin, sort html table in an awesome way
 *
 * @author Arnaud Salvucci
 * @copyright MIT License
 * @version 0.0.1
 */
(function(e){function t(e){var t='<div id="menu">';t+='<p id="sortAZ">'+settings.sortAZ+"</p>";t+='<form action="#" method="post" id="myForm" style="width:'+e.width()+'px;">';t+='<input type="checkbox" value="tous" name="all" id="tous" /> <label for="tous">'+settings.all+"</label><br />";for(value in i(e)){t+='<input type="checkbox" value="'+i(e)[value]+'" name="'+i(e)[value]+'" id="'+i(e)[value]+'" /><label for="'+i(e)[value]+'">'+i(e)[value]+"</label><br />"}t+='<input type="button" id="ok" name="ok" value="'+settings.ok+'" />';t+='<input type="button" id="cancel" name="cancel" value="'+settings.cancel+'" />';t+="</form>";t+="</div>";return t}function n(e,t){e.append(t)}function r(){e("#menu").remove()}function i(t){var n=t.index()+1;var r=t.parents("table").find("td:nth-child("+n+"):gt(0)");var i=[];r.each(function(){var t=e(this).html();if(e.inArray(t,i)==-1){i.push(t)}});return i}function s(t){var n=t.index()+1;var r=t.parents("table").find("td:nth-child("+n+"):gt(0)");var i=[];r.each(function(){var t=e(this).html();i.push(t)});return i}function o(e){return s(e).sort()}function u(t,n){var r=n.index()+1;for(var i=0;i<t.length;i++){e(".selected").closest("table").find("tr:gt(0) td:nth-child("+r+")").each(function(){if(t[i]==e(this).html()){e(".selected").closest("table").append(e(this).parent())}})}}e.fn.awesomeSortTable=function(i){var s={all:"Select all",cancel:"Cancel",ok:"OK",sortAZ:"Sort A-Z",sortZA:"Sort Z-A"};settings=e.extend(s,i);return this.each(function(){e(this).append('<span><img src="fleche.png" /></span>');var i=e(this).children("span");i.click(function(){var i=e(this).parent("td");if(e("#menu").length!=0){r()}else{var s=t(i);i.addClass("selected");n(i,s);e("#sortAZ").click(function(){var e=o(i);u(e,i);r()});e("#cancel").click(function(){r()})}})})}})(jQuery)